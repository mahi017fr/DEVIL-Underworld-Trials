<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Level Devil - Level 8 No Border</title>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; margin: 0; padding: 0; }
        @import url('https://fonts.googleapis.com/css2?family=Nosifer&family=Orbitron:wght@700&display=swap');
        body { background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; width: 100vw; overflow: hidden; font-family: 'Orbitron', sans-serif; touch-action: none; }
        #game-container { position: relative; width: 800px; height: 500px; background: radial-gradient(circle, #250000 0%, #000 100%); overflow: hidden; flex-shrink: 0; }
        .player { position: absolute; width: 30px; height: 30px; background: #fff; border-radius: 4px; z-index: 50; border: 2px solid #f00; box-shadow: 0 0 15px #f00; }
        .platform { position: absolute; height: 40px; background: #111; border-top: 4px solid #f00; }
        .laser { position: absolute; width: 100%; height: 8px; background: #f00; box-shadow: 0 0 25px #f00; z-index: 40; }
        .key { position: absolute; width: 30px; height: 30px; background: #f00; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px #f00; z-index: 20; }
        .enemy { position: absolute; width: 25px; height: 25px; background: #fff; border: 2px solid #f00; border-radius: 50%; box-shadow: 0 0 20px #f00; display: none; z-index: 45; }
        .goal { position: absolute; width: 75px; height: 85px; background: rgba(0,255,0,0.1); bottom: 40px; right: 20px; border: 3px solid #0f0; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #0f0; text-shadow: 0 0 10px #0f0; z-index: 5; }
        .ui { position: absolute; inset: 0; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; flex-direction: column; z-index: 100; text-align: center; }
        .ui h1 { font-family: 'Nosifer', cursive; color: #f00; font-size: 32px; text-shadow: 0 0 20px #f00; margin-bottom: 25px; }
        .btn-group { display: flex; gap: 10px; }
        .ui-btn { padding: 12px 25px; cursor: pointer; border: 2px solid #f00; background: transparent; color: #fff; font-family: 'Orbitron'; border-radius: 50px; font-size: 14px; min-width: 120px; text-transform: uppercase; transition: 0.3s; }
        #controls { width: 100%; max-width: 800px; display: flex; justify-content: space-between; padding: 20px; z-index: 200; }
        .btn { width: 75px; height: 75px; background: rgba(255,0,0,0.1); border: 2px solid #f00; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 24px; font-weight: bold; }
        #hint-popup { position: absolute; width: 450px; background: rgba(10, 0, 0, 0.85); backdrop-filter: blur(15px); border: 3px solid #f00; color: #fff; padding: 40px; text-align: center; z-index: 1000; box-shadow: inset 0 0 50px #f00, 0 0 50px #f00; top: 50%; left: 50%; transform: translate(-50%, -50%); display: none; }
        .skull-icon { font-size: 50px; color: #f00; text-shadow: 0 0 20px #f00; margin-bottom: 15px; animation: pulse 1s infinite alternate; }
        .hint-text { font-family: 'Nosifer', cursive; font-size: 16px; color: #fff; text-shadow: 2px 2px #f00; margin-bottom: 30px; line-height: 1.8; }
        .hint-btn { font-family: 'Nosifer', cursive; font-size: 12px; color: #f00; border: 2px solid #f00; background: #000; padding: 15px 30px; cursor: pointer; transition: 0.3s; box-shadow: 0 0 10px #f00; }
        @keyframes pulse { from { transform: scale(1); opacity: 0.8; } to { transform: scale(1.1); opacity: 1; } }
    </style>
</head>
<body>
<div id="game-container">
    <div id="status-msg" style="position: absolute; top: 15px; width: 100%; text-align: center; color: #f00; font-weight: bold; font-family: 'Orbitron';">LEVEL 8: LASER CHAMBER</div>
    <div class="player" id="player"></div>
    <div class="laser" id="laser"></div>
    <div class="enemy" id="enemy"></div>
    <div class="platform" style="width: 150px; left: 0; bottom: 0;"></div> 
    <div class="platform" style="width: 120px; left: 250px; bottom: 120px;"></div> 
    <div class="platform" style="width: 120px; left: 450px; bottom: 220px;"></div> 
    <div class="platform" id="plat4" style="width: 120px; left: 450px; bottom: 10px; opacity: 0;"></div> 
    <div class="platform" style="width: 150px; right: 0; bottom: 0;"></div> 
    <div class="key" id="mainKey" style="left: 495px; bottom: 265px;">üîë</div>
    <div class="goal" id="exitGoal">EXIT</div>
    <div id="hint-popup">
        <div class="skull-icon">üíÄ</div>
        <div class="hint-text">CURSED KNOWLEDGE:<br>THE CENTER HOLDS AN INVISIBLE WALL!</div>
        <button class="hint-btn" onclick="closeHint()">ACCEPT FATE</button>
    </div>
    <div class="ui" id="dieUI">
        <h1>SHATTERED</h1>
        <div class="btn-group"><button class="ui-btn" onclick="retryGame()">RETRY</button><button class="ui-btn" onclick="location.href='index.html'">HOME</button></div>
    </div>
    <div class="ui" id="winUI">
        <h1 style="color:#0f0">CLEARED</h1>
        <div class="btn-group"><button class="ui-btn" style="border-color:#0f0" onclick="location.href='lvl9.html'">NEXT</button><button class="ui-btn" onclick="location.href='index.html'">HOME</button></div>
    </div>
</div>
<div id="controls">
    <div style="display:flex; gap:20px;"><div class="btn" id="lBtn">‚Üê</div><div class="btn" id="rBtn">‚Üí</div></div>
    <div class="btn" id="jBtn" style="width:110px; border-radius:20px;">UP</div>
</div>
<script>
    const box = document.getElementById("game-container"), player = document.getElementById("player"), laser = document.getElementById("laser"), enemy = document.getElementById("enemy"), dieUI = document.getElementById("dieUI"), winUI = document.getElementById("winUI"), hintPop = document.getElementById("hint-popup");
    let pX = 20, pY = 40, vY = 0, gravity = 0.65, hasKey = false, keys = {}, jumps = 0, frame = 0, eX = -50, eY = -50;
    let deathCount = parseInt(localStorage.getItem('lvl8_deaths') || '0');
    function fit() { let sc = Math.min(window.innerWidth/800, (window.innerHeight-150)/500); box.style.transform = `scale(${sc})`; }
    window.onresize = fit; fit();
    window.onkeydown = e => { if((e.code==="Space"||e.code==="ArrowUp")&&jumps<2 && hintPop.style.display!=="block") {vY = -13; jumps++;} keys[e.code]=true; };
    window.onkeyup = e => keys[e.code]=false;
    function setup(id,code){ const b=document.getElementById(id); b.onpointerdown=e=>{ e.preventDefault(); if(hintPop.style.display==="block") return; if(id==="jBtn"){ if(jumps<2){ vY=-13; jumps++; } } else keys[code]=true; }; b.onpointerup=e=>{ e.preventDefault(); keys[code]=false; }; }
    setup("lBtn","ArrowLeft"); setup("rBtn","ArrowRight"); setup("jBtn","Space");
    function retryGame() { deathCount++; localStorage.setItem('lvl8_deaths', deathCount); location.reload(); }
    function closeHint() { hintPop.style.display = "none"; requestAnimationFrame(loop); }
    if(deathCount > 0) { hintPop.style.display = "block"; } else { requestAnimationFrame(loop); }
    function loop() {
        if(dieUI.style.display==="flex"||winUI.style.display==="flex"||hintPop.style.display==="block") return;
        frame++; if(keys["ArrowLeft"]) pX -= 6; if(keys["ArrowRight"]) pX += 6;
        vY += gravity; pY -= vY;
        let laserPos = 150 + Math.sin(frame * 0.06) * 180;
        laser.style.top = laserPos + "px";
        if (Math.abs((500 - pY) - laserPos) < 20) dieUI.style.display = "flex";
        const plats = [{l:0, r:150, b:0}, {l:250, r:370, b:120}, {l:450, r:570, b:220}, {l:450, r:570, b:10}, {l:650, r:800, b:0}];
        plats.forEach(p => { if(pY <= p.b+40 && pY >= p.b && pX+25 > p.l && pX < p.r) { pY = p.b+40; vY = 0; jumps = 0; } });
        if(!hasKey && pX>470 && pX<520 && pY>250) { hasKey = true; document.getElementById("mainKey").style.display = "none"; enemy.style.display = "block"; eX = 0; eY = 40; }
        if(hasKey) {
            eX += (pX - eX) * 0.045; eY += (pY - eY) * 0.045; enemy.style.left = eX + "px"; enemy.style.bottom = eY + "px";
            if(Math.abs(pX-eX) < 22 && Math.abs(pY-eY) < 22) dieUI.style.display = "flex";
        }
        if(pY < -100) dieUI.style.display = "flex";
        pX = Math.max(0, Math.min(770, pX)); player.style.left = pX + "px"; player.style.bottom = pY + "px";
        if(hasKey && pX > 710 && pY < 50) winUI.style.display = "flex";
        requestAnimationFrame(loop);
    }
</script>
</body>
</html>